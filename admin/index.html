<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex">
  <title>Petal Diary Admin</title>

  <!-- 粉色主题变量 -->
  <style>
    :root {
      --primary-pink: #FFB7C5;
      --cream-pink: #FFE4E9;
      --lavender: #D8BFD8;
      --off-white: #FAF9F6;
      --text-dark: #5A4D41;
      --font-heading: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }
    body {
      font-family: var(--font-body);
      background: var(--off-white);
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
  </style>

  <!-- 手动初始化标记 -->
  <script>
    window.CMS_MANUAL_INIT = true;
    window.DECAP_CMS_MANUAL_INIT = true;
  </script>

  <!-- Decap CMS 单文件 -->
  <script src="js/decap-cms.js"></script>

  <!-- 粉色主题覆盖（直接作用在默认容器） -->
  <style>
    #nc-root {
      --primaryColor: var(--primary-pink);
      --primaryDark: #ff8fab;
      --primaryLight: var(--cream-pink);
      --activeBackground: var(--lavender);
      --controlBackground: #fff;
      --controlHoverBackground: var(--cream-pink);
      --controlBorder: #e8d5d8;
      --controlLabelColor: var(--text-dark);
      --controlTextColor: var(--text-dark);
      --textFieldBackground: #fff;
      --textFieldBorder: #e8d5d8;
      --textFieldHoverBorder: var(--primary-pink);
      --textColor: var(--text-dark);
      --textLight: #8b7f77;
      --background: var(--off-white);
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }
    /* 标题 */
    #nc-root .cmssidebar > h2 { font-family: var(--font-heading); color: var(--text-dark); font-weight: 700; }
    /* 按钮 */
    #nc-root .btn-container button { font-family: var(--font-heading); font-weight: 600; border-radius: 0.75rem; }
    #nc-root .btn-container button:active,
    #nc-root .btn-container button:focus { background: var(--primary-pink); }
    /* 卡片 */
    #nc-root .collection-card { border-radius: 1.5rem; box-shadow: 0 8px 20px rgba(255, 183, 197, 0.15); border: 1px solid var(--cream-pink); }
    #nc-root .collection-card:hover { box-shadow: 0 12px 30px rgba(255, 183, 197, 0.25); }
    /* 表单 */
    #nc-root .nc-control-input,
    #nc-root .nc-control-textarea,
    #nc-root .nc-control-select { border-radius: 0.75rem; border: 1px solid var(--controlBorder); background: var(--textFieldBackground); padding: 0.75rem; }
    #nc-root .nc-control-input:focus,
    #nc-root .nc-control-textarea:focus,
    #nc-root .nc-control-select:focus { border-color: var(--primary-pink); box-shadow: 0 0 0 2px rgba(255, 183, 197, 0.2); }
    /* Markdown 编辑器 */
    #nc-root .CodeMirror { border-radius: 0.75rem; border: 1px solid var(--controlBorder); }
    /* 图片上传 */
    #nc-root .nc-file-upload { border-radius: 0.75rem; border: 2px dashed var(--primary-pink); background: var(--cream-pink); }
  </style>
</head>

<body>
  <!-- 默认容器，Decap 3.x 一定会用它 -->
  <div id="nc-root"></div>

  <script>
    function initDecapCMS() {
      const cms = window.DecapCMS || window.CMS;
      if (cms) {
        cms.init(); // 不传 container，默认就是 #nc-root
        console.log('✅ Decap CMS 已挂载到默认 #nc-root');
      } else {
        console.error('❌ Decap CMS 全局变量未挂载');
      }
    }
    document.addEventListener('DOMContentLoaded', () => setTimeout(initDecapCMS, 1000));
    window.addEventListener('load', initDecapCMS);
  </script>
</body>
</html>